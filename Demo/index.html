<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>JS Prototype - View/Edit state</title>

    <!-- Jquery -->
    <script src="https://code.jquery.com/jquery-2.2.1.js" crossorigin="anonymous"></script>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7"
    crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r"
    crossorigin="anonymous">

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS"
    crossorigin="anonymous"></script>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

    <!-- Local resources -->
    <script src="prototype.js" crossorigin="anonymous"></script>

    <!-- CSS support -->
    <style>
        html {
            position: relative;
            min-height: 100%;
        }
        
        span[data-state=""]:before {
            font: normal normal normal 14px/1 FontAwesome;
            content: "\f096";
            padding-right: 6px;
        }
        
        span[data-state="checked"]:before {
            font: normal normal normal 14px/1 FontAwesome;
            content: "\f046";
            padding-right: 6px;
        }
    </style>
</head>

<body>

    <div class="container">

        <div class="row">
            <div class="col-md-12">
                <h1>Javascript Prototyping - View/Edit state</h1> This page should be considered a technical prototype. It showcases how the prototype.js can be used to quickly
                create prototypes, that have multiple states (VIEW/EDIT) in the current build. The file prototype.js itself
                does not have any framework dependancies.
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <div id="feedback"></div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <h3>Edit controls</h3>
                <a href="#" class="btn btn-default" onclick="javascript:edit(); return false;" data-visible-state="READ"><span class="glyphicon glyphicon-edit"></span> Edit</a>
                <a href="#" class="btn btn-default" onclick="javascript:save(); return false;" data-visible-state="EDIT"><span class="glyphicon glyphicon-floppy-saved"></span> Save Changes</a>
                <a href="#" class="btn btn-default" onclick="javascript:cancel(); return false;" data-visible-state="EDIT"><span class="glyphicon glyphicon-ban-circle"></span> Cancel</a>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <h4>Textbox controls</h4>

                <form class="form-horizontal" role="form">
                    <div class="form-group">
                        <div class="col-md-4">
                            <label class="control-label" for="">Textbox #1:</label>
                            <span class="edit-text-control" data-type="textbox" data-editable="yes"></span>
                        </div>
                        <div class="col-md-4">
                            <label class="control-label" for="">Textbox #2:</label>
                            <span class="edit-text-control" data-type="textbox" data-editable="yes"></span>
                        </div>
                        <div class="col-md-4">
                            <label class="control-label" for="">Textbox #3:</label>
                            <span class="edit-text-control" data-type="textbox" data-editable="yes"></span>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <h4>Checkbox controls</h4>

                <form class="form-horizontal" role="form">
                    <div class="form-group">
                        <div class="col-md-4">
                            <span data-type="checkbox" data-editable="yes" data-state="checked">Checkbox #1</span>
                        </div>
                        <div class="col-md-4">
                            <span data-type="checkbox" data-editable="yes">Checkbox #2</span>
                        </div>
                        <div class="col-md-4">
                            <span data-type="checkbox" data-editable="yes">Checkbox #2</span>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <h4>Dropdown controls</h4>

                <form class="form-horizontal" role="form">
                    <div class="form-group">
                        <div class="col-md-12">
                            <span class="edit-text-control" data-type="dropdown" data-editable="yes" data-values='[{"text": "Text 1", "value": "1" }, {"text": "Text 2", "value": "2" }, {"text": "Text 3", "value": "3" }]'>Dropdown box</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="col-md-2">
                            <span id="update-onchange-dropdown-text" class="edit-text-control" data-type="textbox" data-editable="yes">Text</span>
                        </div>
                        <div class="col-md-2">
                            <span id="update-onchange-dropdown-value" class="edit-text-control" data-type="textbox" data-editable="yes">Value</span>
                        </div>
                        <div class="col-md-8">
                            <span class="edit-text-control" data-type="dropdown" data-editable="yes" data-values='[{"text": "Text 1", "value": "0001" }, {"text": "Text 2", "value": "0002" }, {"text": "Text 3", "value": "0003" }]'
                            data-update-control-text="update-onchange-dropdown-text" data-update-control-value="update-onchange-dropdown-value">Dropdown box that updates value of a textbox (onchange)</span>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <hr>
        <footer>
            <div class="small">
                THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED
                WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
                INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS,
                WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH
                THE USE OR PERFORMANCE OF THIS SOFTWARE.
            </div>
        </footer>

    </div>

    <script>
        var feedbackControl = document.getElementById("feedback");

        function edit() {
            app.setState(app.states.EDIT);
            app.changeEditMode(false);
            app.setControlMode();
        }

        function save() {
            app.setState(app.states.READ);
            app.changeEditMode(true);
            app.createFeedbackDialog("Your changes have been saved successfully!", "", app.feedbackMode.OK, feedbackControl);
            app.setControlMode();
        }

        function cancel() {
            app.setState(app.states.READ);
            app.changeEditMode(false);
            app.createFeedbackDialog("Your changes have not been saved!", "", app.feedbackMode.DEFAULT, feedbackControl);
            app.setControlMode();
        }

        // Register prototype controls
        $(document).ready(function () {

            // Get all elements that are editable
            var editableControls = $("*").filter(function () { return $(this).data("editable") === "yes" });

            if (editableControls.length > 0) {
                editableControls.each(function (index, elem) {
                    app.registerControl(app.controlTypes.INPUT, elem);
                });
            };

            // Get all elements that have a visible state
            var controlsWithState = $("*").filter(function () { return $(this).data("visible-state") != undefined; });

            if (controlsWithState.length > 0) {
                controlsWithState.each(function (index, elem) {
                    app.registerControl(app.controlTypes.CONTROL, elem, $(elem).data("visible-state"));
                });
            };

            // Set controls which are visible in current view mode.
            app.setControlMode();
        });
    </script>

</body>

</html>